# Trenity Video Uniqueizer

Локальная система для пакетной уникализации видео файлов с помощью FFmpeg.

## Описание

Скрипт обрабатывает все видео файлы в папке `input`, применяет случайные незаметные модификации для уникализации (изменение MD5, хешей, отпечатков) и сохраняет результаты в папку `output`.

## Особенности

- ✅ **GPU-ускорение** - использует только GPU для обработки (обязательно)
- ✅ Сохраняет исходное разрешение видео (без масштабирования/кропа)
- ✅ Высокое качество (изменения едва заметны человеческому глазу)
- ✅ Случайные параметры для каждого файла
- ✅ Удаление всех метаданных
- ✅ Поддержка форматов: .mp4, .mov, .avi, .mkv
- ✅ Прогресс-бар обработки
- ✅ Обработка ошибок (пропуск поврежденных файлов)
- ✅ Автоматическое определение доступного GPU

## Требования

- Python 3.7+
- FFmpeg с поддержкой GPU (должен быть в PATH)
- **GPU с поддержкой аппаратного кодирования** (обязательно):
  - NVIDIA (CUDA/NVENC) - рекомендуется
  - Intel (Quick Sync Video)
  - AMD (AMF)
  - Apple (VideoToolbox)
- tqdm (опционально, для прогресс-бара)

## Установка

1. Установите FFmpeg с поддержкой GPU:
   - **Windows (NVIDIA)**: Скачайте FFmpeg с поддержкой CUDA: https://www.gyan.dev/ffmpeg/builds/
   - **Linux (NVIDIA)**: 
     ```bash
     sudo apt install ffmpeg
     # Или скомпилируйте с поддержкой NVENC
     ```
   - **Linux (Intel QSV)**: 
     ```bash
     sudo apt install ffmpeg
     # Убедитесь, что установлены драйверы Intel Media SDK
     ```
   - **Mac**: 
     ```bash
     brew install ffmpeg
     # VideoToolbox поддерживается по умолчанию
     ```
   
   **Важно**: FFmpeg должен быть скомпилирован с поддержкой вашего GPU!

2. Установите зависимости Python:
```bash
pip install -r requirements.txt
```

## Использование

### Режим 1: Обработка всех видео в папке input/ (по умолчанию)

1. Поместите видео файлы в папку `input/`

2. Запустите скрипт:
```bash
python video_uniqueizer.py
```

3. Обработанные видео появятся в папке `output/`

### Режим 2: Обработка конкретного файла

```bash
# Обработать один файл (результат рядом с исходным: video_unique.mp4)
python video_uniqueizer.py video.mp4

# Обработать файл с указанием выходного файла
python video_uniqueizer.py video.mp4 -o output.mp4

# Обработать файл по полному пути
python video_uniqueizer.py "C:\Videos\my_video.mp4"
```

### Режим 3: Обработка всех видео в указанной папке

```bash
# Обработать все видео в указанной папке
python video_uniqueizer.py /path/to/videos/

# Результаты будут в папке output/
```

### Справка по аргументам

```bash
python video_uniqueizer.py --help
```

## Структура проекта

```
trenity-uniqalize-system/
├── input/              # Исходные видео (создается автоматически)
├── output/             # Обработанные видео (создается автоматически)
├── video_uniqueizer.py # Основной скрипт
├── requirements.txt   # Зависимости Python
├── uniqueizer.log      # Лог ошибок (создается автоматически)
└── README.md          # Документация
```

## Принцип работы

Скрипт применяет к каждому видео случайные, но незаметные модификации:

1. **Удаление метаданных** - полностью удаляет все теги и метаданные
2. **Слабый шум** - добавляет минимальный шум для изменения пикселей
3. **Коррекция цвета** - случайные микро-изменения яркости, контраста, насыщенности и гаммы (±2-5%)
4. **Изменение битрейта** - небольшое случайное изменение битрейта (±5%)

Все изменения сохраняют исходное разрешение и визуальное качество видео.

## Примеры использования

### Обработка всех видео в папке input/
```bash
python video_uniqueizer.py
```

### Обработка одного файла
```bash
# Базовый вариант (создаст video_unique.mp4 рядом с исходным)
python video_uniqueizer.py video.mp4

# С указанием выходного файла
python video_uniqueizer.py video.mp4 -o processed_video.mp4

# С полным путем
python video_uniqueizer.py "C:\Users\Videos\my_video.mp4"
```

### Обработка всех видео в указанной папке
```bash
python video_uniqueizer.py "C:\Users\Videos\"
```

### Проверка наличия FFmpeg
```bash
ffmpeg -version
```

## Логирование

Ошибки обработки записываются в файл `uniqueizer.log` для последующего анализа.

## Примечания

- Обработка может занять время в зависимости от размера и количества видео
- Исходные файлы не изменяются
- Каждое видео получает уникальный набор параметров обработки

